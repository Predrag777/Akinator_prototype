<html>
<head>
    <title>Akinator prototype</title>
    <link rel="stylesheet" href="Frontend/style/main.css">
    <link rel="stylesheet" href="Frontend/style/agent.css">
</head>
<body>
    <div id="header">
        <img id="logo" src="Assets/logo.png">
        <h1 aligne="center">WIZARD PROTOTYPE</h1>
    </div>
    
    <div id="main">

        <img id="agent" src="Assets/wizard_thinking.gif">
        <div id="QA">
            <div id="questions"></div>
            <div id="answers">
                <label><input id="Yes" type="radio" name="answer" value="1"> Yes</label>
                <label><input id="No" type="radio" name="answer" value="0"> No</label>
                <label><input id="MaybeNo" type="radio" name="answer" value="-0.2"> Maybe No</label>
                <label><input id="MaybeYes" type="radio" name="answer" value="0.2"> Maybe Yes</label>
                <label><input id="DontKnow" type="radio" name="answer" value="0">Don't Know</label>
            </div>
        </div>
        

    </div>

    <div id="footer">
        <p>Predrag Brajovic</p>
        <p>predragbrajoviccw@gmail.com</p>
    </div>



</body>

<script>


fetch("http://localhost:5000/question")
  .then(response => response.json())
  .then(data => {
        console.log(data.Question)
        document.getElementById("questions").innerHTML=data.Question
  })
  .catch(error => console.error("Greška:", error));


document.addEventListener("DOMContentLoaded", function () {
    const radioButtons = document.querySelectorAll('input[name="answer"]');
    
    radioButtons.forEach(radio => {
        radio.addEventListener("change", function () {
            var question=document.getElementById('questions').innerHTML
            console.log("Odabrano:", this.value," Question=> ",question);
            sendDataToBackend(this.value, question); 
        });
    });
});

function sendDataToBackend(selectedValue, question) {
    fetch('http://localhost:5000/submit', { 
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ answer: selectedValue, question: question }) 
    })
    .then(response => response.json())
    .then(data => {
        console.log("Server odgovorio:", data);
    })
    .catch(error => console.error("Greška pri slanju:", error));
}




</script>

</html>